((function(){jQuery.fn.bindToObservable=function(a){var b,c,d,e,f,g,h;b=$(this),e=(a!=null?a.observable:void 0)||new ObservableList,g=(a!=null?a.template:void 0)||Handlebars.compile("<li>{{this}}</li>"),console.log(e),f=e.subscribe("__all__",function(a,c,d){var e;switch(c){case"add":return e=g({id:a,data:d}),$(b).append(e);case"change":return $(b.children()[a]).replaceWith(g({id:a,data:d}));case"remove":return $(b.children()[a]).remove()}});for(c=0,h=e.length;c<h;c++)d=e[c],f.callback(c,"add",d);return f}})).call(this),function(){var a,b,c,d=function(a,b){return function(){return a.apply(b,arguments)}},e=Object.prototype.hasOwnProperty,f=function(a,b){function d(){this.constructor=a}for(var c in b)e.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};c=function(){function a(a,b,c,d,e){this.callback=a,this.observable=b,this.event=c,this.shared=d,this.prefix=e}return a.prototype.cancel=function(){return this.observable.unsubscribe(this)},a}(),b=function(){function a(){}return a.prototype.isObservable=function(){return!0},a.prototype._notify=function(a,b,c){var d,e,f,g,h,i,j,k;if(this._subscribers==null)return;(f=this._subscribers)[b]||(f[b]=[]),(g=this._subscribers).__all__||(g.__all__=[]),j=$.extend(this._subscribers[b]||[],this._subscribers.__all__||[]),k=[];for(h=0,i=j.length;h<i;h++){e=j[h];if(e.shared)if(e.prefix!=null){if(a!=null?!a.push:!void 0)a=[a];d=$.merge([e.prefix],a),k.push(e.callback(d,b,c))}else k.push(e.callback(a,b,c));else k.push(e.callback(a,c))}return k},a.prototype.subscribe=function(a,b,d,e){var f,g,h,i,j,k=this;if(this._subscriptions==null){this._subscriptions=[];for(f in this){i=this[f];if(i!=null?typeof i.isObservable=="function"?i.isObservable():void 0:void 0)g=function(a,b,c){return k._notify(a,b,c)},this._subscriptions.push(i.subscribe("__all__",g,!0,f))}}return h=new c(b,this,a,d||a==="__all__",e),this._subscribers||(this._subscribers={}),(j=this._subscribers)[a]||(j[a]=[]),this._subscribers[a].push(h),h},a.prototype.unsubscribe=function(a){var b,c,d,e,f;c=this._subscribers[a.event],c.splice(c.indexOf(a),1),this._subscribers[a.event].length===0&&delete this._subscribers[a.event];if($.isEmptyObject(this._subscribers)){f=this._subscriptions;for(d=0,e=f.length;d<e;d++)b=f[d],b.cancel();return this._subscriptions=[]}},a.prototype.addSubscription=function(a,b,c){var d,e=this;b||(b="__all__"),this._subscriptions||(this._subscriptions=[]);if(a!=null?typeof a.isObservable=="function"?a.isObservable():void 0:void 0)return d=function(a,b,c){return e._notify(a,b,c)},this._subscriptions.push(a.subscribe(b,d,void 0,c))},a.prototype.removeSubscriptions=function(a,b){var c,d,e,f,g,h;if(a!=null?typeof a.isObservable=="function"?a.isObservable():void 0:void 0){g=[function(){var b,d,e,f;e=this._subscriptions,f=[];for(b=0,d=e.length;b<d;b++)c=e[b],c.observable===a&&f.push(c);return f}.call(this)],h=[];for(e=0,f=g.length;e<f;e++)d=g[e],b&&d.cancel(),h.push(this._subscriptions.remove(d));return h}},a}(),a=function(a){function b(){this.subscribe=d(this.subscribe,this),this.push=d(this.push,this),this._insert=d(this._insert,this);var a,b,c,e,f=this;this.list=[],this.__defineGetter__("length",function(){return f.list.length}),arguments.length===1&&arguments[0].length!=null?a=arguments[0]:a=arguments;for(c=0,e=a.length;c<e;c++)b=a[c],this._insert(this.length,b)}return f(b,a),b.prototype.__getitem__=function(a){return this.list[a]},b.prototype._remove=function(a){var b;return b=this.list[a],this._notify(a,"remove",b),this.removeSubscriptions(b),this.list.splice(a,1),delete this[this.length],b},b.prototype.remove=function(a){var b,c,d,e;e=this.list;for(b=0,d=e.length;b<d;b++){c=e[b];if(c===a)return this._remove(b)}},b.prototype._setitem__=function(a,b){return this._notify(a,"change",b),this.removeSubscriptions(this.list[a]),this.addSubscription(b,a),this.list[a]=b},b.prototype._insert=function(a,b){var c=this;return this._notify(a,"add",b),this.addSubscription(b,void 0,a),this.list.splice(a,0,b),this.__defineGetter__(a,function(){return c.list[a]}),this.__defineSetter__(a,function(b){return c._setitem__(a,b)}),b},b.prototype.push=function(a){return this._insert(this.list.length,a)},b.prototype.splice=function(a,b){var c,d,e,f;if(b>0){f=[];for(d=0;0<=b?d<b:d>b;0<=b?d++:d--)f.push(this._remove(a));return f}for(c=2,e=arguments.length;2<=e?c<e:c>e;2<=e?c++:c--)console.log(this.list.join(", ")),this._insert(a+c-2,arguments[c]);return console.log(this.list.join(", "))},b.prototype.forEach=function(a,b){return this.list.forEach(a,b)},b.prototype.toString=function(){return this.list.toString()},b.prototype.toDict=function(){return this.list},b.prototype.subscribe=function(a,c,d,e){var f,g,h,i,j=this;this._subscriptions||(this._subscriptions=[]);if(this._subscriptions.length===0)for(f=0,i=this.list.length;0<=i?f<i:f>i;0<=i?f++:f--){g=this.list[f];if(g!=null?typeof g.isObservable=="function"?g.isObservable():void 0:void 0)h=function(a,b,c){return j._notify(a,b,c)},this._subscriptions.push(g.subscribe("__all__",h,!0,f))}return b.__super__.subscribe.call(this,a,c,d,e)},b}(b),window.SimpleObservable=b,window.ObservableList=a}.call(this);